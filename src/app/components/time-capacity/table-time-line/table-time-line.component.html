<h2 class="title-project">{{generalData.project_name}}</h2>

<div>
    <span class="text-bttns-sticky">Fijar Columnas:</span>
    <mat-button-toggle-group
        multiple
        [value]="[]"
        #stickyColumns="matButtonToggleGroup"
        class="sticky-toggle-group"
    >
        <mat-button-toggle value="name">
        Recurso
        </mat-button-toggle>
        <mat-button-toggle value="position">
        Cargo
        </mat-button-toggle>
        <mat-button-toggle value="profile">
        Rol Proyecto
        </mat-button-toggle>
    </mat-button-toggle-group>
</div>

<div class="example-container mat-elevation-z4">
    <table mat-table [dataSource]="generalData.dataSource" id="matTable" name="matTable">
        <!-- Recurso -->
        <ng-container
            matColumnDef="name"
            [sticky]="isSticky(stickyColumns, 'name')"
        >
        <th mat-header-cell *matHeaderCellDef class="header-cell-resource">
            Recurso
        </th>
        <td mat-cell *matCellDef="let element" class="text-cell">
            {{element.name}}
        </td>
        </ng-container>

        <!-- Cargo -->
        <ng-container
            matColumnDef="position"
            [sticky]="isSticky(stickyColumns, 'position')"
        >
        <th mat-header-cell *matHeaderCellDef class="header-cell-resource" >
            Cargo
        </th>
        <td mat-cell *matCellDef="let element" class="text-cell">
            {{element.position}}
        </td>
        </ng-container>

        <!-- Rol Proyecto -->
        <ng-container
            matColumnDef="profile"
            [sticky]="isSticky(stickyColumns, 'profile')"
        >
        <th mat-header-cell *matHeaderCellDef class="header-cell-resource" >
            Rol Proyecto
        </th>
        <td mat-cell *matCellDef="let element" class="text-cell">
            {{element.profile}}
        </td>
        </ng-container>

        <ng-container *ngFor="let data of displayedColumns; index as i">
            <ng-container *ngIf="i > 2" [matColumnDef]="data">
                <th mat-header-cell *matHeaderCellDef class="headers-date">
                <div class="content-date">
                    <div class="months">{{generalData.months[data]}}</div>
                    <div class="sems">
                    <div class="header-sem">2s</div>
                    <div class="header-sem">4s</div>
                    </div>
                </div>
                </th>

                <td mat-cell *matCellDef="let element">
                <div class="dedication">
                    <div
                    *ngIf="element[data].sem2.dedication != '0%'"
                    class="rect"
                    [ngStyle]="{'background-color': element[data].sem2.color}"
                    >
                    {{element[data].sem2.dedication}}
                    </div>
                    <div
                    *ngIf="element[data].sem2.dedication == '0%'"
                    class="rect"
                    ></div>

                    <div
                    *ngIf="element[data].sem4.dedication != '0%'"
                    class="rect"
                    [ngStyle]="{'background-color': element[data].sem4.color}"
                    >
                    {{element[data].sem4.dedication}}
                    </div>
                    <div
                    *ngIf="element[data].sem4.dedication == '0%'"
                    class="rect"
                    ></div>
                </div>
                </td>
            </ng-container>
        </ng-container>

        <!-- Sem 2 -->
        <ng-container matColumnDef="sem2">
            <th mat-header-cell *matHeaderCellDef class="header-cell">2s</th>
            <td mat-cell *matCellDef="let element">
                <div class="rect" [ngStyle]="{'background-color': element.sem2.color}">
                {{element.sem2.dedication}}
                </div>
            </td>
        </ng-container>

        <!-- Sem 4 -->
        <ng-container matColumnDef="sem4">
            <th mat-header-cell *matHeaderCellDef class="header-cell">4s</th>
            <td mat-cell *matCellDef="let element">
                <div class="rect" [ngStyle]="{'background-color': element.sem4.color}">
                {{element.sem4.dedication}}
                </div>
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
</div>
