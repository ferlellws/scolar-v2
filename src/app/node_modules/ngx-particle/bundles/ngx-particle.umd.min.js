!function(a,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-particle",["exports","@angular/core","@angular/common"],t):t((a=a||self)["ngx-particle"]={},a.ng.core,a.ng.common)}(this,(function(a,t,s){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function e(a,t,s,e){var i,r=arguments.length,n=r<3?t:null===e?e=Object.getOwnPropertyDescriptor(t,s):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(a,t,s,e);else for(var o=a.length-1;o>=0;o--)(i=a[o])&&(n=(r<3?i(n):r>3?i(t,s,n):i(t,s))||n);return r>3&&n&&Object.defineProperty(t,s,n),n}function i(a,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,t)}var r=function(){function a(){this.width=100,this.height=100,this.style={}}return e([t.Input(),i("design:type",Number)],a.prototype,"width",void 0),e([t.Input(),i("design:type",Number)],a.prototype,"height",void 0),e([t.Input(),i("design:type",Object)],a.prototype,"params",void 0),e([t.Input(),i("design:type",Object)],a.prototype,"style",void 0),a=e([t.Component({selector:"particles",template:'\n        <div [ngStyle]="style" class="particles-container">\n            <canvas d-particles [params]="params" [style.width.%]="width" [style.height.%]="height"></canvas>\n        </div>\n    '}),i("design:paramtypes",[])],a)}(),n=function(a){a=a.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(a,t,s,e){return t+t+s+s+e+e}));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},o=function(a,t,s){return Math.min(Math.max(a,t),s)},c=function(a,t){return t.indexOf(a)>-1},p=function(a,t){for(var s in t)t[s]&&t[s].constructor&&t[s].constructor===Object?(a[s]=a[s]||{},p(a[s],t[s])):a[s]=t[s];return a},m=function(a){var t={};if("object"==typeof a)if(a instanceof Array){var s=a[Math.floor(Math.random()*a.length)];t.rgb=n(s)}else{var e=a.r,i=a.g,r=a.b;if(void 0!==e&&void 0!==i&&void 0!==r)t.rgb={r:e,g:i,b:r};else{var o=a.h,c=a.s,p=a.l;void 0!==o&&void 0!==i&&void 0!==r&&(t.hsl={h:o,s:c,l:p})}}else"random"==a?t.rgb={r:Math.floor(255*Math.random())+1,g:Math.floor(255*Math.random())+1,b:Math.floor(255*Math.random())+1}:"string"==typeof a&&(t.rgb=n(a));return t},h=function(){return{particles:{number:{value:100,density:{enable:!0,value_area:800}},color:{value:"#FFF"},shape:{type:"circle",stroke:{width:0,color:"#000000"},polygon:{nb_sides:5},image:{src:"",width:100,height:100}},opacity:{value:.5,random:!1,anim:{enable:!0,speed:1,opacity_min:.1,sync:!1}},size:{value:3,random:!0,anim:{enable:!1,speed:40,size_min:0,sync:!1}},line_linked:{enable:!0,distance:150,color:"#FFF",opacity:.6,width:1,shadow:{enable:!1,blur:5,color:"lime"}},move:{enable:!0,speed:3,direction:"none",random:!1,straight:!1,out_mode:"out",bounce:!0,attract:{enable:!1,rotateX:3e3,rotateY:3e3}},array:[]},interactivity:{detect_on:"canvas",events:{onhover:{enable:!0,mode:"grab"},onclick:{enable:!0,mode:"push"},resize:!0},modes:{grab:{distance:200,line_linked:{opacity:1}},bubble:{distance:200,size:80,duration:.4},repulse:{distance:200,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}},mouse:{}},retina_detect:!0}};function l(a,t){var s=a.particles;if(t.img_error=void 0,"image"!=s.shape.type||""==s.shape.image.src)throw t.img_error=!0,"Error : no image.src";if("svg"==t.img_type){var e=new XMLHttpRequest;e.open("GET",s.shape.image.src),e.onreadystatechange=function(a){if(4==e.readyState){if(200!=e.status)throw t.img_error=!0,"Error : image not found";if(t.source_svg=a.currentTarget.response,null==t.source_svg){t.checkAnimFrame=requestAnimationFrame(void 0)}}},e.send()}else{var i=new Image;i.addEventListener("load",(function(){t.img_obj=i,cancelAnimationFrame(t.checkAnimFrame)})),i.src=s.shape.image.src}}function _(a,t){var s=t.source_svg.replace(/#([0-9A-F]{3,6})/gi,(function(t,s,e,i){var r;if(a.color.rgb){var n=a.color.rgb;r="rgba( "+n.r+", "+n.g+", "+n.b+", "+a.opacity+" )"}else{var o=a.color.hsl;r="rgba( "+o.h+", "+o.s+", "+o.l+", "+a.opacity+" )"}return r})),e=new Blob([s],{type:"image/svg+xml;charset=utf-8"}),i=window.URL||window,r=i.createObjectURL(e),n=new Image;n.addEventListener("load",(function(){a.img.obj=n,a.img.loaded=!0,i.revokeObjectURL(r),t.count_svg++})),n.src=r}var v=function(){function a(){}return a.prototype.linkParticles=function(a,t,s,e){var i=a.x-t.x,r=a.y-t.y,n=Math.sqrt(i*i+r*r),o=s.particles.line_linked;if(n<=s.particles.line_linked.distance){var c=s.particles.line_linked.opacity-n/(1/s.particles.line_linked.opacity)/s.particles.line_linked.distance;if(c>0){var p=s.particles.line_linked.color_rgb_line,m=p.r,h=p.g,l=p.b;e.ctx.save(),e.ctx.strokeStyle="rgba( "+m+", "+h+", "+l+", "+c+" )",e.ctx.lineWidth=s.particles.line_linked.width,e.ctx.beginPath(),o.shadow.enable&&(e.ctx.shadowBlur=o.shadow.blur,e.ctx.shadowColor=o.shadow.color),e.ctx.moveTo(a.x,a.y),e.ctx.lineTo(t.x,t.y),e.ctx.stroke(),e.ctx.closePath(),e.ctx.restore()}}},a.prototype.attractParticles=function(a,t,s){var e=a.x-t.x,i=a.y-t.y;if(Math.sqrt(e*e+i*i)<=s.particles.line_linked.distance){var r=e/(1e3*s.particles.move.attract.rotateX),n=i/(1e3*s.particles.move.attract.rotateY);a.vx-=r,a.vy-=n,t.vx+=r,t.vy+=n}},a.prototype.bounceParticles=function(a,t){var s=a.x-t.x,e=a.y-t.y;Math.sqrt(s*s+e*e)<=a.radius+t.radius&&(a.vx=-a.vx,a.vy=-a.vy,t.vx=-t.vx,t.vy=-t.vy)},a}(),u=function(){function a(a,t,s,e,i,r){this._canvasParams=a,this._params=t,this._tmpParams=s,this._setupSize(),this._setupPosition(r),this._setupColor(e),this._setupOpacity(),this._setupAnimation()}return a.prototype._setupSize=function(){this.radius=(this._params.particles.size.random?Math.random():1)*this._params.particles.size.value,this._params.particles.size.anim.enable&&(this.size_status=!1,this.vs=this._params.particles.size.anim.speed/100,this._params.particles.size.anim.sync||(this.vs=this.vs*Math.random()))},a.prototype._setupPosition=function(a){this.x=a?a.x:Math.random()*this._canvasParams.width,this.y=a?a.y:Math.random()*this._canvasParams.height,this.x>this._canvasParams.width-2*this.radius?this.x=this.x-this.radius:this.x<2*this.radius&&(this.x=this.x+this.radius),this.y>this._canvasParams.height-2*this.radius?this.y=this.y-this.radius:this.y<2*this.radius&&(this.y=this.y+this.radius),this._params.particles.move.bounce&&this._checkOverlap(this,a)},a.prototype._checkOverlap=function(a,t){var s=this;this._params.particles.array.forEach((function(e){var i=e,r=a.x-i.x,n=a.y-i.y;Math.sqrt(r*r+n*n)<=a.radius+i.radius&&(a.x=t?t.x:Math.random()*s._canvasParams.width,a.y=t?t.y:Math.random()*s._canvasParams.height,s._checkOverlap(a))}))},a.prototype._setupColor=function(a){this.color=m(a.value)},a.prototype._setupOpacity=function(){this.opacity=(this._params.particles.opacity.random?Math.random():1)*this._params.particles.opacity.value,this._params.particles.opacity.anim.enable&&(this.opacity_status=!1,this.vo=this._params.particles.opacity.anim.speed/100,this._params.particles.opacity.anim.sync||(this.vo=this.vo*Math.random()))},a.prototype._setupAnimation=function(){var a=null;switch(this._params.particles.move.direction){case"top":a={x:0,y:-1};break;case"top-right":a={x:.5,y:-.5};break;case"right":a={x:1,y:0};break;case"bottom-right":a={x:.5,y:.5};break;case"bottom":a={x:0,y:1};break;case"bottom-left":a={x:-.5,y:1};break;case"left":a={x:-1,y:0};break;case"top-left":a={x:-.5,y:-.5};break;default:a={x:0,y:0}}this._params.particles.move.straight?(this.vx=a.x,this.vy=a.y,this._params.particles.move.random&&(this.vx=this.vx*Math.random(),this.vy=this.vy*Math.random())):(this.vx=a.x+Math.random()-.5,this.vy=a.y+Math.random()-.5),this.vx_i=this.vx,this.vy_i=this.vy;var t=this._params.particles.shape.type;if("object"==typeof t){if(t instanceof Array){var s=t[Math.floor(Math.random()*t.length)];this.shape=s}}else this.shape=t;if("image"==this.shape){var e=this._params.particles.shape;this.img={src:e.image.src,ratio:e.image.width/e.image.height},this.img.ratio||(this.img.ratio=1),"svg"==this._tmpParams.img_type&&null!=this._tmpParams.source_svg&&(_(this,this._tmpParams),this._tmpParams.pushing&&(this.img.loaded=!1))}},a.prototype._drawShape=function(a,t,s,e,i,r){var n=i*r,o=i/r,c=180*(o-2)/o,p=Math.PI-Math.PI*c/180;a.save(),a.beginPath(),a.translate(t,s),a.moveTo(0,0);for(var m=0;m<n;m++)a.lineTo(e,0),a.translate(e,0),a.rotate(p);a.fill(),a.restore()},a.prototype.draw=function(){var a,t,s,e=this;this._params.particles;if(a=null!=this.radius_bubble?this.radius_bubble:this.radius,t=null!=this.opacity_bubble?this.opacity_bubble:this.opacity,this.color.rgb){var i=this.color.rgb;s="rgba( "+i.r+", "+i.g+", "+i.b+", "+t+" )"}else{var r=this.color.hsl;s="hsla( "+r.h+", "+r.s+", "+r.l+", "+t+" )"}switch(this._canvasParams.ctx.fillStyle=s,this._canvasParams.ctx.beginPath(),this.shape){case"circle":this._canvasParams.ctx.arc(this.x,this.y,a,0,2*Math.PI,!1);break;case"edge":this._canvasParams.ctx.rect(this.x-a,this.y-a,2*a,2*a);break;case"triangle":this._drawShape(this._canvasParams.ctx,this.x-a,this.y+a/1.66,2*a,3,2);break;case"polygon":this._drawShape(this._canvasParams.ctx,this.x-a/(this._params.particles.shape.polygon.nb_sides/3.5),this.y-a/.76,2.66*a/(this._params.particles.shape.polygon.nb_sides/3),this._params.particles.shape.polygon.nb_sides,1);break;case"star":this._drawShape(this._canvasParams.ctx,this.x-2*a/(this._params.particles.shape.polygon.nb_sides/4),this.y-a/1.52,2*a*2.66/(this._params.particles.shape.polygon.nb_sides/3),this._params.particles.shape.polygon.nb_sides,2);break;case"image":var n=void 0;(n="svg"==this._tmpParams.img_type?this.img.obj:this._tmpParams.img_obj)&&function(t){e._canvasParams.ctx.drawImage(t,e.x-a,e.y-a,2*a,2*a/e.img.ratio)}(n)}this._canvasParams.ctx.closePath(),this._params.particles.shape.stroke.width>0&&(this._canvasParams.ctx.strokeStyle=this._params.particles.shape.stroke.color,this._canvasParams.ctx.lineWidth=this._params.particles.shape.stroke.width,this._canvasParams.ctx.stroke()),this._canvasParams.ctx.fill()},a}(),d=function(){function a(a,t,s){this._canvasParams=a,this._params=t,this._tmpParams=s,this._interaction=new v}return a.prototype.particlesCreate=function(){for(var a=this._params.particles,t=a.color,s=a.opacity,e=0;e<this._params.particles.number.value;e++)this._params.particles.array.push(new u(this._canvasParams,this._params,this._tmpParams,t,s.value))},a.prototype._particlesUpdate=function(){var a=this;this._params.particles.array.forEach((function(t,s){if(a._params.particles.move.enable){var e=a._params.particles.move.speed/2;t.x+=t.vx*e,t.y+=t.vy*e}var i;switch(a._params.particles.opacity.anim.enable&&(1==t.opacity_status?(t.opacity>=a._params.particles.opacity.value&&(t.opacity_status=!1),t.opacity+=t.vo):(t.opacity<=a._params.particles.opacity.anim.opacity_min&&(t.opacity_status=!0),t.opacity-=t.vo),t.opacity<0&&(t.opacity=0)),a._params.particles.size.anim.enable&&(1==t.size_status?(t.radius>=a._params.particles.size.value&&(t.size_status=!1),t.radius+=t.vs):(t.radius<=a._params.particles.size.anim.size_min&&(t.size_status=!0),t.radius-=t.vs),t.radius<0&&(t.radius=0)),i="bounce"==a._params.particles.move.out_mode?{x_left:t.radius,x_right:a._canvasParams.width,y_top:t.radius,y_bottom:a._canvasParams.height}:{x_left:-t.radius,x_right:a._canvasParams.width+t.radius,y_top:-t.radius,y_bottom:a._canvasParams.height+t.radius},t.x-t.radius>a._canvasParams.width?(t.x=i.x_left,t.y=Math.random()*a._canvasParams.height):t.x+t.radius<0&&(t.x=i.x_right,t.y=Math.random()*a._canvasParams.height),t.y-t.radius>a._canvasParams.height?(t.y=i.y_top,t.x=Math.random()*a._canvasParams.width):t.y+t.radius<0&&(t.y=i.y_bottom,t.x=Math.random()*a._canvasParams.width),a._params.particles.move.out_mode){case"bounce":(t.x+t.radius>a._canvasParams.width||t.x-t.radius<0)&&(t.vx=-t.vx),(t.y+t.radius>a._canvasParams.height||t.y-t.radius<0)&&(t.vy=-t.vy)}if(c("grab",a._params.interactivity.events.onhover.mode)&&a._grabParticle(t),(c("bubble",a._params.interactivity.events.onhover.mode)||c("bubble",a._params.interactivity.events.onclick.mode))&&a._bubbleParticle(t),(c("repulse",a._params.interactivity.events.onhover.mode)||c("repulse",a._params.interactivity.events.onclick.mode))&&a._repulseParticle(t),a._params.particles.line_linked.enable||a._params.particles.move.attract.enable)for(var r=s+1;r<a._params.particles.array.length;r++){var n=a._params.particles.array[r];a._params.particles.line_linked.enable&&a._interaction.linkParticles(t,n,a._params,a._canvasParams),a._params.particles.move.attract.enable&&a._interaction.attractParticles(t,n,a._params),a._params.particles.move.bounce&&a._interaction.bounceParticles(t,n)}}))},a.prototype.particlesDraw=function(){this._canvasParams.ctx.clearRect(0,0,this._canvasParams.width,this._canvasParams.height),this._particlesUpdate(),this._params.particles.array.forEach((function(a){a.draw()}))},a.prototype.particlesEmpty=function(){this._params.particles.array=[]},a.prototype.removeParticles=function(a){this._params.particles.array.splice(0,a),this._params.particles.move.enable||this.particlesDraw()},a.prototype.pushParticles=function(a,t){this._tmpParams.pushing=!0;for(var s=0;s<a;s++)this._params.particles.array.push(new u(this._canvasParams,this._params,this._tmpParams,this._params.particles.color,this._params.particles.opacity.value,{x:t?t.pos_x:Math.random()*this._canvasParams.width,y:t?t.pos_y:Math.random()*this._canvasParams.height})),s==a-1&&(this._params.particles.move.enable||this.particlesDraw(),this._tmpParams.pushing=!1)},a.prototype._bubbleParticle=function(a){var t=this;if(this._params.interactivity.events.onhover.enable&&c("bubble",this._params.interactivity.events.onhover.mode)){var s=a.x-this._params.interactivity.mouse.pos_x,e=a.y-this._params.interactivity.mouse.pos_y,i=Math.sqrt(s*s+e*e),r=1-i/this._params.interactivity.modes.bubble.distance,n=function(){a.opacity_bubble=a.opacity,a.radius_bubble=a.radius};if(i<=this._params.interactivity.modes.bubble.distance){if(r>=0&&"mousemove"==this._params.interactivity.status){if(this._params.interactivity.modes.bubble.size!=this._params.particles.size.value)if(this._params.interactivity.modes.bubble.size>this._params.particles.size.value){(p=a.radius+this._params.interactivity.modes.bubble.size*r)>=0&&(a.radius_bubble=p)}else{var o=a.radius-this._params.interactivity.modes.bubble.size,p=a.radius-o*r;a.radius_bubble=p>0?p:0}var m;if(this._params.interactivity.modes.bubble.opacity!=this._params.particles.opacity.value)if(this._params.interactivity.modes.bubble.opacity>this._params.particles.opacity.value)(m=this._params.interactivity.modes.bubble.opacity*r)>a.opacity&&m<=this._params.interactivity.modes.bubble.opacity&&(a.opacity_bubble=m);else(m=a.opacity-(this._params.particles.opacity.value-this._params.interactivity.modes.bubble.opacity)*r)<a.opacity&&m>=this._params.interactivity.modes.bubble.opacity&&(a.opacity_bubble=m)}}else n();"mouseleave"==this._params.interactivity.status&&n()}else if(this._params.interactivity.events.onclick.enable&&c("bubble",this._params.interactivity.events.onclick.mode)&&this._tmpParams.bubble_clicking){s=a.x-this._params.interactivity.mouse.click_pos_x,e=a.y-this._params.interactivity.mouse.click_pos_y;var h=Math.sqrt(s*s+e*e),l=((new Date).getTime()-this._params.interactivity.mouse.click_time)/1e3;l>this._params.interactivity.modes.bubble.duration&&(this._tmpParams.bubble_duration_end=!0),l>2*this._params.interactivity.modes.bubble.duration&&(this._tmpParams.bubble_clicking=!1,this._tmpParams.bubble_duration_end=!1);var _=function(s,e,i,r,n){if(s!=e)if(t._tmpParams.bubble_duration_end){if(null!=i){o=s+(s-(r-l*(r-s)/t._params.interactivity.modes.bubble.duration));"size"==n&&(a.radius_bubble=o),"opacity"==n&&(a.opacity_bubble=o)}}else if(h<=t._params.interactivity.modes.bubble.distance){if((null!=i?i:r)!=s){var o=r-l*(r-s)/t._params.interactivity.modes.bubble.duration;"size"==n&&(a.radius_bubble=o),"opacity"==n&&(a.opacity_bubble=o)}}else"size"==n&&(a.radius_bubble=void 0),"opacity"==n&&(a.opacity_bubble=void 0)};this._tmpParams.bubble_clicking&&(_(this._params.interactivity.modes.bubble.size,this._params.particles.size.value,a.radius_bubble,a.radius,"size"),_(this._params.interactivity.modes.bubble.opacity,this._params.particles.opacity.value,a.opacity_bubble,a.opacity,"opacity"))}},a.prototype._repulseParticle=function(a){var t=this;if(this._params.interactivity.events.onhover.enable&&c("repulse",this._params.interactivity.events.onhover.mode)&&"mousemove"==this._params.interactivity.status){var s=a.x-this._params.interactivity.mouse.pos_x,e=a.y-this._params.interactivity.mouse.pos_y,i=Math.sqrt(s*s+e*e),r={x:s/i,y:e/i},n=this._params.interactivity.modes.repulse.distance,p=o(1/n*(-1*Math.pow(i/n,2)+1)*n*100,0,50),m={x:a.x+r.x*p,y:a.y+r.y*p};"bounce"==this._params.particles.move.out_mode?(m.x-a.radius>0&&m.x+a.radius<this._canvasParams.width&&(a.x=m.x),m.y-a.radius>0&&m.y+a.radius<this._canvasParams.height&&(a.y=m.y)):(a.x=m.x,a.y=m.y)}else if(this._params.interactivity.events.onclick.enable&&c("repulse",this._params.interactivity.events.onclick.mode))if(this._tmpParams.repulse_finish||(this._tmpParams.repulse_count++,this._tmpParams.repulse_count==this._params.particles.array.length&&(this._tmpParams.repulse_finish=!0)),this._tmpParams.repulse_clicking){n=Math.pow(this._params.interactivity.modes.repulse.distance/6,3);var h=this._params.interactivity.mouse.click_pos_x-a.x,l=this._params.interactivity.mouse.click_pos_y-a.y,_=h*h+l*l,v=-n/_*1;_<=n&&function(){var s=Math.atan2(l,h);if(a.vx=v*Math.cos(s),a.vy=v*Math.sin(s),"bounce"==t._params.particles.move.out_mode){var e={x:a.x+a.vx,y:a.y+a.vy};(e.x+a.radius>t._canvasParams.width||e.x-a.radius<0)&&(a.vx=-a.vx),(e.y+a.radius>t._canvasParams.height||e.y-a.radius<0)&&(a.vy=-a.vy)}}()}else 0==this._tmpParams.repulse_clicking&&(a.vx=a.vx_i,a.vy=a.vy_i)},a.prototype._grabParticle=function(a){var t=this._params,s=t.interactivity,e=t.particles;if(s.events.onhover.enable&&"mousemove"==s.status){var i=a.x-s.mouse.pos_x,r=a.y-s.mouse.pos_y,n=Math.sqrt(i*i+r*r);if(n<=s.modes.grab.distance){var o=s.modes.grab,c=o.line_linked.opacity-n/(1/o.line_linked.opacity)/o.distance;if(c>0){var p=e.line_linked.color_rgb_line,m=p.r,h=p.g,l=p.b;this._canvasParams.ctx.strokeStyle="rgba( "+m+", "+h+", "+l+", "+c+" )",this._canvasParams.ctx.lineWidth=e.line_linked.width,this._canvasParams.ctx.beginPath(),this._canvasParams.ctx.moveTo(a.x,a.y),this._canvasParams.ctx.lineTo(s.mouse.pos_x,s.mouse.pos_y),this._canvasParams.ctx.stroke(),this._canvasParams.ctx.closePath()}}}},a}(),y=function(){function a(a,t,s){this._canvasParams=a,this._params=t,this._tmpParams=s,this._onWindowResize=this._onWindowResize.bind(this),this._retinaInit(),this._canvasSize(),this.particlesManager=new d(this._canvasParams,this._params,this._tmpParams),this.particlesManager.particlesCreate(),this._densityAutoParticles();var e=this._params.particles;e.line_linked.color_rgb_line=n(e.line_linked.color)}return a.prototype.cancelAnimation=function(){this._tmpParams.drawAnimFrame&&(cancelAnimationFrame(this._tmpParams.drawAnimFrame),this._tmpParams.drawAnimFrame=null)},a.prototype.draw=function(){var a=this._params.particles;"image"==a.shape.type?"svg"==this._tmpParams.img_type?this._tmpParams.count_svg>=a.number.value?(this.particlesManager.particlesDraw(),a.move.enable?this._tmpParams.drawAnimFrame=requestAnimationFrame(this.draw.bind(this)):cancelAnimationFrame(this._tmpParams.drawAnimFrame)):this._tmpParams.img_error||(this._tmpParams.drawAnimFrame=requestAnimationFrame(this.draw.bind(this))):null!=this._tmpParams.img_obj?(this.particlesManager.particlesDraw(),a.move.enable?this._tmpParams.drawAnimFrame=requestAnimationFrame(this.draw.bind(this)):cancelAnimationFrame(this._tmpParams.drawAnimFrame)):this._tmpParams.img_error||(this._tmpParams.drawAnimFrame=requestAnimationFrame(this.draw.bind(this))):(this.particlesManager.particlesDraw(),a.move.enable?this._tmpParams.drawAnimFrame=requestAnimationFrame(this.draw.bind(this)):cancelAnimationFrame(this._tmpParams.drawAnimFrame))},a.prototype._densityAutoParticles=function(){var a=this._params.particles;if(a.number.density.enable){var t=this._canvasParams.el.width*this._canvasParams.el.height/1e3;this._tmpParams.retina&&(t/=2*this._canvasParams.pxratio);var s=t*a.number.value/a.number.density.value_area,e=a.array.length-s;e<0?this.particlesManager.pushParticles(Math.abs(e)):this.particlesManager.removeParticles(e)}},a.prototype._retinaInit=function(){this._params.retina_detect&&window.devicePixelRatio>1?(this._canvasParams.pxratio=window.devicePixelRatio,this._tmpParams.retina=!0,this._canvasParams.width=this._canvasParams.el.offsetWidth*this._canvasParams.pxratio,this._canvasParams.height=this._canvasParams.el.offsetHeight*this._canvasParams.pxratio,this._params.particles.size.value=this._tmpParams.obj.size_value*this._canvasParams.pxratio,this._params.particles.size.anim.speed=this._tmpParams.obj.size_anim_speed*this._canvasParams.pxratio,this._params.particles.move.speed=this._tmpParams.obj.move_speed*this._canvasParams.pxratio,this._params.particles.line_linked.distance=this._tmpParams.obj.line_linked_distance*this._canvasParams.pxratio,this._params.interactivity.modes.grab.distance=this._tmpParams.obj.mode_grab_distance*this._canvasParams.pxratio,this._params.interactivity.modes.bubble.distance=this._tmpParams.obj.mode_bubble_distance*this._canvasParams.pxratio,this._params.particles.line_linked.width=this._tmpParams.obj.line_linked_width*this._canvasParams.pxratio,this._params.interactivity.modes.bubble.size=this._tmpParams.obj.mode_bubble_size*this._canvasParams.pxratio,this._params.interactivity.modes.repulse.distance=this._tmpParams.obj.mode_repulse_distance*this._canvasParams.pxratio):(this._canvasParams.pxratio=1,this._tmpParams.retina=!1)},a.prototype._canvasClear=function(){this._canvasParams.ctx.clearRect(0,0,this._canvasParams.width,this._canvasParams.height)},a.prototype._canvasPaint=function(){this._canvasParams.ctx.fillRect(0,0,this._canvasParams.width,this._canvasParams.height)},a.prototype._canvasSize=function(){this._canvasParams.el.width=this._canvasParams.width,this._canvasParams.el.height=this._canvasParams.height,this._params&&this._params.interactivity.events.resize&&window.addEventListener("resize",this._onWindowResize)},a.prototype._onWindowResize=function(){this._canvasParams.width=this._canvasParams.el.offsetWidth,this._canvasParams.height=this._canvasParams.el.offsetHeight,this._tmpParams.retina&&(this._canvasParams.width*=this._canvasParams.pxratio,this._canvasParams.height*=this._canvasParams.pxratio),this._canvasParams.el.width=this._canvasParams.width,this._canvasParams.el.height=this._canvasParams.height,this._params.particles.move.enable||(this.particlesManager.particlesEmpty(),this.particlesManager.particlesCreate(),this.particlesManager.particlesDraw(),this._densityAutoParticles()),this._densityAutoParticles()},a}(),b=function(){function a(a){this.el=a,this._tmpParams={}}return Object.defineProperty(a.prototype,"params",{set:function(a){var t={particles:{number:{value:100,density:{enable:!0,value_area:800}},color:{value:"#FFF"},shape:{type:"circle",stroke:{width:0,color:"#000000"},polygon:{nb_sides:5},image:{src:"",width:100,height:100}},opacity:{value:.5,random:!1,anim:{enable:!0,speed:1,opacity_min:.1,sync:!1}},size:{value:3,random:!0,anim:{enable:!1,speed:40,size_min:0,sync:!1}},line_linked:{enable:!0,distance:150,color:"#FFF",opacity:.6,width:1,shadow:{enable:!1,blur:5,color:"lime"}},move:{enable:!0,speed:3,direction:"none",random:!1,straight:!1,out_mode:"out",bounce:!0,attract:{enable:!1,rotateX:3e3,rotateY:3e3}},array:[]},interactivity:{detect_on:"canvas",events:{onhover:{enable:!0,mode:"grab"},onclick:{enable:!0,mode:"push"},resize:!0},modes:{grab:{distance:200,line_linked:{opacity:1}},bubble:{distance:200,size:80,duration:.4},repulse:{distance:200,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}},mouse:{}},retina_detect:!0};this._params=p(t,a)},enumerable:!0,configurable:!0}),a.prototype.ngOnDestroy=function(){this._canvasManager&&this._canvasManager.cancelAnimation()},a.prototype.ngAfterViewInit=function(){this._canvasParams={el:this.el.nativeElement,ctx:this.el.nativeElement.getContext("2d"),width:this.el.nativeElement.offsetWidth,height:this.el.nativeElement.offsetHeight},this._tmpParams.obj={size_value:this._params.particles.size.value,size_anim_speed:this._params.particles.size.anim.speed,move_speed:this._params.particles.move.speed,line_linked_distance:this._params.particles.line_linked.distance,line_linked_width:this._params.particles.line_linked.width,mode_grab_distance:this._params.interactivity.modes.grab.distance,mode_bubble_distance:this._params.interactivity.modes.bubble.distance,mode_bubble_size:this._params.interactivity.modes.bubble.size,mode_repulse_distance:this._params.interactivity.modes.repulse.distance},this._params.interactivity.el="window"==this._params.interactivity.detect_on?window:this._canvasParams.el,c("image",this._params.particles.shape.type)&&(this._tmpParams.img_type=this._params.particles.shape.image.src.substr(this._params.particles.shape.image.src.length-3),l(this._params,this._tmpParams)),this._canvasManager=new y(this._canvasParams,this._params,this._tmpParams),this._canvasManager.draw()},a.prototype.onMouseMove=function(a){var t=this._params.interactivity;if(t.events.onhover.enable||t.events.onclick.enable){var s=void 0;s=t.el==window?{x:a.clientX,y:a.clientY}:{x:a.offsetX||a.clientX,y:a.offsetY||a.clientY},t.mouse.pos_x=s.x,t.mouse.pos_y=s.y,this._tmpParams.retina&&(t.mouse.pos_x*=this._canvasParams.pxratio,t.mouse.pos_y*=this._canvasParams.pxratio),t.status="mousemove"}},a.prototype.onMouseLeave=function(){var a=this._params.interactivity;(a.events.onhover.enable||a.events.onclick.enable)&&(a.mouse.pos_x=null,a.mouse.pos_y=null,a.status="mouseleave")},a.prototype.onClick=function(){var a=this,t=this._params,s=t.interactivity,e=t.particles;if(s.events.onclick.enable)switch(s.mouse.click_pos_x=s.mouse.pos_x,s.mouse.click_pos_y=s.mouse.pos_y,s.mouse.click_time=(new Date).getTime(),s.events.onclick.mode){case"push":e.move.enable||1==s.modes.push.particles_nb?this._canvasManager.particlesManager.pushParticles(s.modes.push.particles_nb,s.mouse):s.modes.push.particles_nb>1&&this._canvasManager.particlesManager.pushParticles(s.modes.push.particles_nb);break;case"remove":this._canvasManager.particlesManager.removeParticles(s.modes.remove.particles_nb);break;case"bubble":this._tmpParams.bubble_clicking=!0;break;case"repulse":this._tmpParams.repulse_clicking=!0,this._tmpParams.repulse_count=0,this._tmpParams.repulse_finish=!1,setTimeout((function(){a._tmpParams.repulse_clicking=!1}),1e3*s.modes.repulse.duration)}},a.ctorParameters=function(){return[{type:t.ElementRef}]},e([t.Input(),i("design:type",Object),i("design:paramtypes",[Object])],a.prototype,"params",null),e([t.HostListener("mousemove",["$event"]),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],a.prototype,"onMouseMove",null),e([t.HostListener("mouseleave"),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],a.prototype,"onMouseLeave",null),e([t.HostListener("click"),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],a.prototype,"onClick",null),a=e([t.Directive({selector:"[d-particles]"}),i("design:paramtypes",[t.ElementRef])],a)}(),g=function(){function a(){}return a=e([t.NgModule({imports:[s.CommonModule],declarations:[r,b],exports:[r,b]})],a)}();a.CanvasManager=y,a.Particle=u,a.ParticleInteraction=v,a.ParticlesComponent=r,a.ParticlesDirective=b,a.ParticlesManager=d,a.ParticlesModule=g,a.clamp=o,a.createSvgImg=_,a.deepExtend=p,a.getColor=m,a.getDefaultParams=h,a.hexToRgb=n,a.isInArray=c,a.loadImg=l,Object.defineProperty(a,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-particle.umd.min.js.map