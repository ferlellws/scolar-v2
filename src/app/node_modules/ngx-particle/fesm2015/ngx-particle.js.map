{"version":3,"file":"ngx-particle.js","sources":["ng://ngx-particle/lib/particles.component.ts","ng://ngx-particle/lib/models/utils.ts","ng://ngx-particle/lib/models/particleInteraction.ts","ng://ngx-particle/lib/models/particle.ts","ng://ngx-particle/lib/models/particlesManager.ts","ng://ngx-particle/lib/models/canvasManager.ts","ng://ngx-particle/lib/particles.directive.ts","ng://ngx-particle/lib/particles.module.ts","ng://ngx-particle/public_api.ts","ng://ngx-particle/ngx-particle.ts"],"sourcesContent":["import { Component, Input } from '@angular/core';\r\nimport { IParams } from './models';\r\n\r\n@Component({\r\n    selector: 'particles',\r\n    template: `\r\n        <div [ngStyle]=\"style\" class=\"particles-container\">\r\n            <canvas d-particles [params]=\"params\" [style.width.%]=\"width\" [style.height.%]=\"height\"></canvas>\r\n        </div>\r\n    `\r\n})\r\nexport class ParticlesComponent {\r\n\r\n    @Input() width: number = 100;\r\n    @Input() height: number = 100;\r\n    @Input() params: IParams;\r\n    @Input() style: Object = {};\r\n\r\n    constructor() { }\r\n}","import { IParams, ITmpParams } from \"./interfaces\";\r\nimport { Particle } from \"./particle\";\r\n\r\nexport type RGB = {\r\n\tr: number;\r\n\tg: number;\r\n\tb: number;\r\n};\r\n\r\nexport type HSL = {\r\n\th: number;\r\n\ts: number;\r\n\tl: number;\r\n};\r\n\r\nexport const hexToRgb: (hex: string) => RGB =\r\n    (hex) => {\r\n        let shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\r\n        hex = hex.replace(shorthandRegex, (m, r, g, b) => {\r\n            return r + r + g + g + b + b;\r\n        });\r\n        let result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n        return result ? {\r\n            r: parseInt(result[1], 16),\r\n            g: parseInt(result[2], 16),\r\n            b: parseInt(result[3], 16)\r\n        } : null;\r\n    };\r\n\r\nexport const clamp: (number: number, min: number, max: number) => number =\r\n    (number, min, max) => {\r\n        return Math.min(Math.max(number, min), max);\r\n    };\r\n\r\nexport const isInArray: (value: any, array: any) => boolean =\r\n    (value, array) => {\r\n        return array.indexOf(value) > -1;\r\n    };\r\n\r\nexport const deepExtend: (destination: any, source: any) => any =\r\n    function (destination, source) {\r\n        for (let property in source) {\r\n            if (source[property] &&\r\n                source[property].constructor &&\r\n                source[property].constructor === Object) {\r\n                destination[property] = destination[property] || {};\r\n                deepExtend(destination[property], source[property]);\r\n            } else {\r\n                destination[property] = source[property];\r\n            }\r\n        }\r\n        return destination;\r\n    };\r\n\r\nexport const getColor: (colorObject: any) => { rgb?: RGB, hsl?: HSL } =\r\n    (colorObject) => {\r\n        let color: { rgb?: RGB, hsl?: HSL } = {};\r\n        if (typeof (colorObject) == 'object') {\r\n            if (colorObject instanceof Array) {\r\n                let selectedColor: string = colorObject[Math.floor(Math.random() * colorObject.length)];\r\n                color.rgb = hexToRgb(selectedColor);\r\n            } else {\r\n                let { r, g, b } = colorObject;\r\n                if (r !== undefined && g !== undefined && b !== undefined) {\r\n                    color.rgb = { r, g, b };\r\n                } else {\r\n                    let { h, s, l } = colorObject;\r\n                    if (h !== undefined && g !== undefined && b !== undefined) {\r\n                        color.hsl = { h, s, l };\r\n                    }\r\n                }\r\n            }\r\n        } else if (colorObject == 'random') {\r\n            color.rgb = {\r\n                r: (Math.floor(Math.random() * 255) + 1),\r\n                g: (Math.floor(Math.random() * 255) + 1),\r\n                b: (Math.floor(Math.random() * 255) + 1)\r\n            }\r\n        } else if (typeof (colorObject) == 'string') {\r\n            color.rgb = hexToRgb(colorObject);\r\n        }\r\n        return color;\r\n    };\r\n\r\nexport const getDefaultParams: () => IParams =\r\n    () => {\r\n        return {\r\n            particles: {\r\n                number: {\r\n                    value: 100,\r\n                    density: {\r\n                        enable: true,\r\n                        value_area: 800\r\n                    }\r\n                },\r\n                color: {\r\n                    value: '#FFF'\r\n                },\r\n                shape: {\r\n                    type: 'circle',\r\n                    stroke: {\r\n                        width: 0,\r\n                        color: '#000000'\r\n                    },\r\n                    polygon: {\r\n                        nb_sides: 5\r\n                    },\r\n                    image: {\r\n                        src: '',\r\n                        width: 100,\r\n                        height: 100\r\n                    }\r\n                },\r\n                opacity: {\r\n                    value: 0.5,\r\n                    random: false,\r\n                    anim: {\r\n                        enable: true,\r\n                        speed: 1,\r\n                        opacity_min: 0.1,\r\n                        sync: false\r\n                    }\r\n                },\r\n                size: {\r\n                    value: 3,\r\n                    random: true,\r\n                    anim: {\r\n                        enable: false,\r\n                        speed: 40,\r\n                        size_min: 0,\r\n                        sync: false\r\n                    }\r\n                },\r\n                line_linked: {\r\n                    enable: true,\r\n                    distance: 150,\r\n                    color: '#FFF',\r\n                    opacity: 0.6,\r\n                    width: 1,\r\n                    shadow: {\r\n                        enable: false,\r\n                        blur: 5,\r\n                        color: 'lime'\r\n                    }\r\n                },\r\n                move: {\r\n                    enable: true,\r\n                    speed: 3,\r\n                    direction: 'none',\r\n                    random: false,\r\n                    straight: false,\r\n                    out_mode: 'out',\r\n                    bounce: true,\r\n                    attract: {\r\n                        enable: false,\r\n                        rotateX: 3000,\r\n                        rotateY: 3000\r\n                    }\r\n                },\r\n                array: []\r\n            },\r\n            interactivity: {\r\n                detect_on: 'canvas',\r\n                events: {\r\n                    onhover: {\r\n                        enable: true,\r\n                        mode: 'grab'\r\n                    },\r\n                    onclick: {\r\n                        enable: true,\r\n                        mode: 'push'\r\n                    },\r\n                    resize: true\r\n                },\r\n                modes: {\r\n                    grab: {\r\n                        distance: 200,\r\n                        line_linked: {\r\n                            opacity: 1\r\n                        }\r\n                    },\r\n                    bubble: {\r\n                        distance: 200,\r\n                        size: 80,\r\n                        duration: 0.4\r\n                    },\r\n                    repulse: {\r\n                        distance: 200,\r\n                        duration: 0.4\r\n                    },\r\n                    push: {\r\n                        particles_nb: 4\r\n                    },\r\n                    remove: {\r\n                        particles_nb: 2\r\n                    }\r\n                },\r\n                mouse: {}\r\n            },\r\n            retina_detect: true\r\n        }\r\n    };\r\n\r\n\r\nexport function loadImg(params: IParams, tmp: ITmpParams) {\r\n    let { particles } = params;\r\n\r\n    tmp.img_error = undefined;\r\n\r\n    if (particles.shape.type == 'image' && particles.shape.image.src != '') {\r\n        if (tmp.img_type == 'svg') {\r\n            let xhr: XMLHttpRequest = new XMLHttpRequest();\r\n            xhr.open('GET', particles.shape.image.src);\r\n            xhr.onreadystatechange = (data: any) => {\r\n                if (xhr.readyState == 4) {\r\n                    if (xhr.status == 200) {\r\n                        tmp.source_svg = data.currentTarget.response;\r\n                        if (tmp.source_svg == undefined) {\r\n                            let check: any;\r\n                            tmp.checkAnimFrame = requestAnimationFrame(check);\r\n                        }\r\n                    } else {\r\n                        tmp.img_error = true;\r\n                        throw \"Error : image not found\";\r\n                    }\r\n                }\r\n            };\r\n            xhr.send();\r\n        } else {\r\n            let img: HTMLImageElement = new Image();\r\n            img.addEventListener('load', () => {\r\n                tmp.img_obj = img;\r\n                cancelAnimationFrame(tmp.checkAnimFrame);\r\n            });\r\n            img.src = particles.shape.image.src;\r\n        }\r\n    } else {\r\n        tmp.img_error = true;\r\n        throw \"Error : no image.src\";\r\n    }\r\n}\r\n\r\nexport function createSvgImg(particle: Particle, tmp: ITmpParams): void {\r\n    let svgXml: string = tmp.source_svg;\r\n    let rgbHex: RegExp = /#([0-9A-F]{3,6})/gi;\r\n    let coloredSvgXml: string = svgXml.replace(rgbHex, (m, r, g, b) => {\r\n        let color_value: string;\r\n        if (particle.color.rgb) {\r\n            let { r, g, b } = particle.color.rgb;\r\n            color_value = `rgba( ${r}, ${g}, ${b}, ${particle.opacity} )`;\r\n        } else {\r\n            let { h, s, l } = particle.color.hsl;\r\n            color_value = `rgba( ${h}, ${s}, ${l}, ${particle.opacity} )`;\r\n        }\r\n        return color_value;\r\n    });\r\n\r\n    let svg: Blob = new Blob([coloredSvgXml], {\r\n        type: 'image/svg+xml;charset=utf-8'\r\n    });\r\n\r\n    let DOMURL: any = window.URL || window;\r\n    let url: any = DOMURL.createObjectURL(svg);\r\n\r\n    let img = new Image();\r\n    img.addEventListener('load', () => {\r\n        particle.img.obj = img;\r\n        particle.img.loaded = true;\r\n        DOMURL.revokeObjectURL(url);\r\n        tmp.count_svg++;\r\n    });\r\n    img.src = url;\r\n}","import { Particle } from './particle';\r\nimport { IParams, ICanvasParams } from './interfaces';\r\n\r\nexport class ParticleInteraction {\r\n    constructor() { }\r\n\r\n    linkParticles(p1: Particle, p2: Particle, params: IParams, canvasParams: ICanvasParams): void {\r\n        let dx: number = p1.x - p2.x;\r\n        let dy: number = p1.y - p2.y;\r\n        let dist: number = Math.sqrt(dx * dx + dy * dy);\r\n        let { line_linked } = params.particles;\r\n\r\n        if (dist <= params.particles.line_linked.distance) {\r\n            let opacity_line: number = params.particles.line_linked.opacity - (dist / (1 / params.particles.line_linked.opacity)) / params.particles.line_linked.distance;\r\n            if (opacity_line > 0) {\r\n                let color_line: any = params.particles.line_linked.color_rgb_line;\r\n                let { r, g, b } = color_line;\r\n                canvasParams.ctx.save();\r\n                canvasParams.ctx.strokeStyle = `rgba( ${r}, ${g}, ${b}, ${opacity_line} )`;\r\n                canvasParams.ctx.lineWidth = params.particles.line_linked.width;\r\n\r\n                canvasParams.ctx.beginPath();\r\n                if (line_linked.shadow.enable) {\r\n                    canvasParams.ctx.shadowBlur = line_linked.shadow.blur;\r\n                    canvasParams.ctx.shadowColor = line_linked.shadow.color;\r\n                }\r\n\r\n                canvasParams.ctx.moveTo(p1.x, p1.y);\r\n                canvasParams.ctx.lineTo(p2.x, p2.y);\r\n                canvasParams.ctx.stroke();\r\n                canvasParams.ctx.closePath();\r\n                canvasParams.ctx.restore();\r\n            }\r\n        }\r\n    }\r\n\r\n    attractParticles(p1: Particle, p2: Particle, params: IParams): void {\r\n        let dx: number = p1.x - p2.x;\r\n        let dy: number = p1.y - p2.y;\r\n        let dist: number = Math.sqrt(dx * dx + dy * dy);\r\n\r\n        if (dist <= params.particles.line_linked.distance) {\r\n            let ax = dx / (params.particles.move.attract.rotateX * 1000);\r\n            let ay = dy / (params.particles.move.attract.rotateY * 1000);\r\n\r\n            p1.vx -= ax;\r\n            p1.vy -= ay;\r\n\r\n            p2.vx += ax;\r\n            p2.vy += ay;\r\n        }\r\n    }\r\n\r\n    bounceParticles(p1: Particle, p2: Particle): void {\r\n        let dx: number = p1.x - p2.x;\r\n        let dy: number = p1.y - p2.y;\r\n        let dist: number = Math.sqrt(dx * dx + dy * dy);\r\n        let dist_p: number = p1.radius + p2.radius;\r\n\r\n        if (dist <= dist_p) {\r\n            p1.vx = -p1.vx;\r\n            p1.vy = -p1.vy;\r\n            p2.vx = -p2.vx;\r\n            p2.vy = -p2.vy;\r\n        }\r\n    }\r\n}","import { ICanvasParams, IParams, ITmpParams } from './interfaces';\r\nimport { getColor, createSvgImg } from './utils';\r\n\r\nexport class Particle {\r\n    radius: number;\r\n    radius_bubble: number;\r\n    size_status: boolean;\r\n    vs: number;\r\n\r\n    x: number;\r\n    y: number;\r\n    color: any;\r\n\r\n    opacity: number;\r\n    opacity_bubble: number;\r\n    opacity_status: boolean;\r\n    vo: number;\r\n\r\n    vx: number;\r\n    vy: number;\r\n\r\n    vx_i: number;\r\n    vy_i: number;\r\n\r\n    shape: string;\r\n\r\n    img: { src: string; ratio: number; loaded?: boolean; obj?: any; };\r\n\r\n    constructor(private _canvasParams: ICanvasParams, private _params: IParams, private _tmpParams: ITmpParams, color?: any, opacity?: any, position?: { x: number; y: number; }) {\r\n        this._setupSize();\r\n        this._setupPosition(position);\r\n        this._setupColor(color);\r\n        this._setupOpacity();\r\n        this._setupAnimation();\r\n    }\r\n\r\n    private _setupSize(): void {\r\n        this.radius = (this._params.particles.size.random ? Math.random() : 1) * this._params.particles.size.value;\r\n        if (this._params.particles.size.anim.enable) {\r\n            this.size_status = false;\r\n            this.vs = this._params.particles.size.anim.speed / 100;\r\n            if (!this._params.particles.size.anim.sync)\r\n                this.vs = this.vs * Math.random();\r\n        }\r\n    }\r\n\r\n    private _setupPosition(position?: { x: number; y: number; }): void {\r\n        this.x = position ? position.x : Math.random() * this._canvasParams.width;\r\n        this.y = position ? position.y : Math.random() * this._canvasParams.height;\r\n\r\n        if (this.x > this._canvasParams.width - this.radius * 2) {\r\n            this.x = this.x - this.radius;\r\n        } else if (this.x < this.radius * 2) {\r\n            this.x = this.x + this.radius;\r\n        }\r\n        if (this.y > this._canvasParams.height - this.radius * 2) {\r\n            this.y = this.y - this.radius;\r\n        } else if (this.y < this.radius * 2) {\r\n            this.y = this.y + this.radius;\r\n        }\r\n\r\n        if (this._params.particles.move.bounce) {\r\n            this._checkOverlap(this, position);\r\n        }\r\n    }\r\n\r\n    private _checkOverlap(p1: Particle, position?: { x: number; y: number; }): void {\r\n        let { particles } = this._params;\r\n\r\n        particles.array.forEach((particle: Particle) => {\r\n            let p2: Particle = particle;\r\n\r\n            let dx: number = p1.x - p2.x;\r\n            let dy: number = p1.y - p2.y;\r\n            let dist: number = Math.sqrt(dx * dx + dy * dy);\r\n\r\n            if (dist <= p1.radius + p2.radius) {\r\n                p1.x = position ? position.x : Math.random() * this._canvasParams.width;\r\n                p1.y = position ? position.y : Math.random() * this._canvasParams.height;\r\n                this._checkOverlap(p1);\r\n            }\r\n        });\r\n    }\r\n\r\n    private _setupColor(color?: any) {\r\n        this.color = getColor(color.value);\r\n    }\r\n\r\n    private _setupOpacity(): void {\r\n        this.opacity = (this._params.particles.opacity.random ? Math.random() : 1) * this._params.particles.opacity.value;\r\n        if (this._params.particles.opacity.anim.enable) {\r\n            this.opacity_status = false;\r\n            this.vo = this._params.particles.opacity.anim.speed / 100;\r\n            if (!this._params.particles.opacity.anim.sync) {\r\n                this.vo = this.vo * Math.random();\r\n            }\r\n        }\r\n    }\r\n\r\n    private _setupAnimation(): void {\r\n        let velbase: { x: number; y: number; } = null;\r\n        switch (this._params.particles.move.direction) {\r\n            case 'top':\r\n                velbase = { x: 0, y: -1 };\r\n                break;\r\n            case 'top-right':\r\n                velbase = { x: 0.5, y: -0.5 };\r\n                break;\r\n            case 'right':\r\n                velbase = { x: 1, y: 0 };\r\n                break;\r\n            case 'bottom-right':\r\n                velbase = { Â x: 0.5, y: 0.5 };\r\n                break;\r\n            case 'bottom':\r\n                velbase = { x: 0, y: 1 };\r\n                break;\r\n            case 'bottom-left':\r\n                velbase = { x: -0.5, y: 1 };\r\n                break;\r\n            case 'left':\r\n                velbase = { x: -1, y: 0 };\r\n                break;\r\n            case 'top-left':\r\n                velbase = { Â x: -0.5, y: -0.5 };\r\n                break;\r\n            default:\r\n                velbase = { Â x: 0, y: 0 };\r\n                break;\r\n        }\r\n\r\n        if (this._params.particles.move.straight) {\r\n            this.vx = velbase.x;\r\n            this.vy = velbase.y;\r\n            if (this._params.particles.move.random) {\r\n                this.vx = this.vx * (Math.random());\r\n                this.vy = this.vy * (Math.random());\r\n            }\r\n        } else {\r\n            this.vx = velbase.x + Math.random() - 0.5;\r\n            this.vy = velbase.y + Math.random() - 0.5;\r\n        }\r\n\r\n        this.vx_i = this.vx;\r\n        this.vy_i = this.vy;\r\n\r\n        let shape_type: any = this._params.particles.shape.type;\r\n\r\n        if (typeof (shape_type) == 'object') {\r\n            if (shape_type instanceof Array) {\r\n                let shape_selected: string = shape_type[Math.floor(Math.random() * shape_type.length)];\r\n                this.shape = shape_selected;\r\n            }\r\n        } else {\r\n            this.shape = shape_type;\r\n        }\r\n\r\n        if (this.shape == 'image') {\r\n            let sh: any = this._params.particles.shape;\r\n            this.img = {\r\n                src: sh.image.src,\r\n                ratio: sh.image.width / sh.image.height\r\n            };\r\n\r\n            if (!this.img.ratio)\r\n                this.img.ratio = 1;\r\n            if (this._tmpParams.img_type == 'svg' && this._tmpParams.source_svg != undefined) {\r\n                createSvgImg(this, this._tmpParams);\r\n                if (this._tmpParams.pushing) {\r\n                    this.img.loaded = false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private _drawShape(c: CanvasRenderingContext2D, startX: number, startY: number, sideLength: number, sideCountNumerator: number, sideCountDenominator: number): void {\r\n        let sideCount: number = sideCountNumerator * sideCountDenominator;\r\n        let decimalSides: number = sideCountNumerator / sideCountDenominator;\r\n        let interiorAngleDegrees: number = (180 * (decimalSides - 2)) / decimalSides;\r\n        let interiorAngle: number = Math.PI - Math.PI * interiorAngleDegrees / 180;\r\n\r\n        c.save();\r\n        c.beginPath();\r\n        c.translate(startX, startY);\r\n        c.moveTo(0, 0);\r\n\r\n        for (let i = 0; i < sideCount; i++) {\r\n            c.lineTo(sideLength, 0);\r\n            c.translate(sideLength, 0);\r\n            c.rotate(interiorAngle);\r\n        }\r\n\r\n        c.fill();\r\n        c.restore();\r\n    }\r\n\r\n    public draw(): void {\r\n        let { particles } = this._params;\r\n\r\n        let radius: number;\r\n        if (this.radius_bubble != undefined) {\r\n            radius = this.radius_bubble;\r\n        } else {\r\n            radius = this.radius;\r\n        }\r\n\r\n        let opacity: number;\r\n        if (this.opacity_bubble != undefined) {\r\n            opacity = this.opacity_bubble;\r\n        } else {\r\n            opacity = this.opacity;\r\n        }\r\n\r\n        let color_value: string;\r\n\r\n        if (this.color.rgb) {\r\n            let { r, g, b } = this.color.rgb;\r\n            color_value = `rgba( ${r}, ${g}, ${b}, ${opacity} )`;\r\n        } else {\r\n            let { h, s, l } = this.color.hsl;\r\n            color_value = `hsla( ${h}, ${s}, ${l}, ${opacity} )`;\r\n        }\r\n\r\n        this._canvasParams.ctx.fillStyle = color_value;\r\n        this._canvasParams.ctx.beginPath();\r\n\r\n        switch (this.shape) {\r\n            case 'circle':\r\n                this._canvasParams.ctx.arc(this.x, this.y, radius, 0, Math.PI * 2, false);\r\n                break;\r\n\r\n            case 'edge':\r\n                this._canvasParams.ctx.rect(this.x - radius, this.y - radius, radius * 2, radius * 2);\r\n                break;\r\n\r\n            case 'triangle':\r\n                this._drawShape(this._canvasParams.ctx, this.x - radius, this.y + radius / 1.66, radius * 2, 3, 2);\r\n                break;\r\n\r\n            case 'polygon':\r\n                this._drawShape(\r\n                    this._canvasParams.ctx,\r\n                    this.x - radius / (this._params.particles.shape.polygon.nb_sides / 3.5),\r\n                    this.y - radius / (2.66 / 3.5),\r\n                    radius * 2.66 / (this._params.particles.shape.polygon.nb_sides / 3),\r\n                    this._params.particles.shape.polygon.nb_sides,\r\n                    1\r\n                );\r\n                break;\r\n\r\n            case 'star':\r\n                this._drawShape(\r\n                    this._canvasParams.ctx,\r\n                    this.x - radius * 2 / (this._params.particles.shape.polygon.nb_sides / 4),\r\n                    this.y - radius / (2 * 2.66 / 3.5),\r\n                    radius * 2 * 2.66 / (this._params.particles.shape.polygon.nb_sides / 3),\r\n                    this._params.particles.shape.polygon.nb_sides,\r\n                    2\r\n                );\r\n                break;\r\n\r\n            case 'image':\r\n                let draw: (img_obj: any) => void =\r\n                    (img_obj) => {\r\n                        this._canvasParams.ctx.drawImage(\r\n                            img_obj,\r\n                            this.x - radius,\r\n                            this.y - radius,\r\n                            radius * 2,\r\n                            radius * 2 / this.img.ratio\r\n                        );\r\n                    };\r\n                let img_obj: any;\r\n\r\n                if (this._tmpParams.img_type == 'svg') {\r\n                    img_obj = this.img.obj;\r\n                } else {\r\n                    img_obj = this._tmpParams.img_obj;\r\n                }\r\n\r\n                if (img_obj)\r\n                    draw(img_obj);\r\n                break;\r\n        }\r\n\r\n        this._canvasParams.ctx.closePath();\r\n\r\n        if (this._params.particles.shape.stroke.width > 0) {\r\n            this._canvasParams.ctx.strokeStyle = this._params.particles.shape.stroke.color;\r\n            this._canvasParams.ctx.lineWidth = this._params.particles.shape.stroke.width;\r\n            this._canvasParams.ctx.stroke();\r\n        }\r\n\r\n        this._canvasParams.ctx.fill();\r\n    }\r\n}","import { ParticleInteraction } from './particleInteraction';\r\nimport { IParams, ICanvasParams, IMouseParams, ITmpParams } from './interfaces';\r\nimport { Particle } from './particle';\r\nimport { isInArray, clamp } from './utils';\r\n\r\nexport class ParticlesManager {\r\n    private _interaction: ParticleInteraction;\r\n\r\n    constructor(private _canvasParams: ICanvasParams, private _params: IParams, private _tmpParams: ITmpParams) {\r\n        this._interaction = new ParticleInteraction();\r\n    }\r\n\r\n    public particlesCreate(): void {\r\n        let { color, opacity } = this._params.particles;\r\n        for (let i = 0; i < this._params.particles.number.value; i++) {\r\n            this._params.particles.array.push(new Particle(this._canvasParams, this._params, this._tmpParams, color, opacity.value));\r\n        }\r\n    }\r\n\r\n    private _particlesUpdate(): void {\r\n        type Pos = {\r\n            x_left: number;\r\n            x_right: number;\r\n            y_top: number;\r\n            y_bottom: number;\r\n        };\r\n\r\n        this._params.particles.array.forEach((particle: Particle, i: number) => {\r\n            if (this._params.particles.move.enable) {\r\n                let ms = this._params.particles.move.speed / 2;\r\n                particle.x += particle.vx * ms;\r\n                particle.y += particle.vy * ms;\r\n            }\r\n\r\n            if (this._params.particles.opacity.anim.enable) {\r\n                if (particle.opacity_status == true) {\r\n                    if (particle.opacity >= this._params.particles.opacity.value)\r\n                        particle.opacity_status = false;\r\n                    particle.opacity += particle.vo;\r\n                } else {\r\n                    if (particle.opacity <= this._params.particles.opacity.anim.opacity_min)\r\n                        particle.opacity_status = true;\r\n                    particle.opacity -= particle.vo;\r\n                }\r\n                if (particle.opacity < 0)\r\n                    particle.opacity = 0;\r\n            }\r\n\r\n            if (this._params.particles.size.anim.enable) {\r\n                if (particle.size_status == true) {\r\n                    if (particle.radius >= this._params.particles.size.value)\r\n                        particle.size_status = false;\r\n                    particle.radius += particle.vs;\r\n                } else {\r\n                    if (particle.radius <= this._params.particles.size.anim.size_min)\r\n                        particle.size_status = true;\r\n                    particle.radius -= particle.vs;\r\n                }\r\n                if (particle.radius < 0)\r\n                    particle.radius = 0;\r\n            }\r\n\r\n            let new_pos: Pos;\r\n\r\n            if (this._params.particles.move.out_mode == 'bounce') {\r\n                new_pos = {\r\n                    x_left: particle.radius,\r\n                    x_right: this._canvasParams.width,\r\n                    y_top: particle.radius,\r\n                    y_bottom: this._canvasParams.height\r\n                };\r\n            } else {\r\n                new_pos = {\r\n                    x_left: -particle.radius,\r\n                    x_right: this._canvasParams.width + particle.radius,\r\n                    y_top: -particle.radius,\r\n                    y_bottom: this._canvasParams.height + particle.radius\r\n                };\r\n            }\r\n\r\n            if (particle.x - particle.radius > this._canvasParams.width) {\r\n                particle.x = new_pos.x_left;\r\n                particle.y = Math.random() * this._canvasParams.height;\r\n            } else if (particle.x + particle.radius < 0) {\r\n                particle.x = new_pos.x_right;\r\n                particle.y = Math.random() * this._canvasParams.height;\r\n            }\r\n\r\n            if (particle.y - particle.radius > this._canvasParams.height) {\r\n                particle.y = new_pos.y_top;\r\n                particle.x = Math.random() * this._canvasParams.width;\r\n            } else if (particle.y + particle.radius < 0) {\r\n                particle.y = new_pos.y_bottom;\r\n                particle.x = Math.random() * this._canvasParams.width;\r\n            }\r\n\r\n            switch (this._params.particles.move.out_mode) {\r\n                case 'bounce':\r\n                    if (particle.x + particle.radius > this._canvasParams.width)\r\n                        particle.vx = -particle.vx;\r\n                    else if (particle.x - particle.radius < 0)\r\n                        particle.vx = -particle.vx;\r\n                    if (particle.y + particle.radius > this._canvasParams.height)\r\n                        particle.vy = -particle.vy;\r\n                    else if (particle.y - particle.radius < 0)\r\n                        particle.vy = -particle.vy;\r\n                    break;\r\n            }\r\n\r\n            if (isInArray('grab', this._params.interactivity.events.onhover.mode)) {\r\n                this._grabParticle(particle);\r\n            }\r\n\r\n            if (isInArray('bubble', this._params.interactivity.events.onhover.mode) ||\r\n                isInArray('bubble', this._params.interactivity.events.onclick.mode)) {\r\n                this._bubbleParticle(particle);\r\n            }\r\n\r\n            if (isInArray('repulse', this._params.interactivity.events.onhover.mode) ||\r\n                isInArray('repulse', this._params.interactivity.events.onclick.mode)) {\r\n                this._repulseParticle(particle);\r\n            }\r\n\r\n            if (this._params.particles.line_linked.enable || this._params.particles.move.attract.enable) {\r\n                for (let j = i + 1; j < this._params.particles.array.length; j++) {\r\n                    let link = this._params.particles.array[j];\r\n\r\n                    if (this._params.particles.line_linked.enable)\r\n                        this._interaction.linkParticles(particle, link, this._params, this._canvasParams);\r\n\r\n                    if (this._params.particles.move.attract.enable)\r\n                        this._interaction.attractParticles(particle, link, this._params);\r\n\r\n                    if (this._params.particles.move.bounce)\r\n                        this._interaction.bounceParticles(particle, link);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    public particlesDraw(): void {\r\n        this._canvasParams.ctx.clearRect(0, 0, this._canvasParams.width, this._canvasParams.height);\r\n        this._particlesUpdate();\r\n\r\n        this._params.particles.array.forEach((particle: Particle) => {\r\n            particle.draw();\r\n        });\r\n    }\r\n\r\n    public particlesEmpty(): void {\r\n        this._params.particles.array = [];\r\n    }\r\n\r\n    public removeParticles(nb: number): void {\r\n        this._params.particles.array.splice(0, nb);\r\n\r\n        if (!this._params.particles.move.enable) {\r\n            this.particlesDraw();\r\n        }\r\n    }\r\n\r\n    public pushParticles(nb: number, pos?: IMouseParams): void {\r\n        this._tmpParams.pushing = true;\r\n\r\n        for (let i = 0; i < nb; i++) {\r\n            this._params.particles.array.push(\r\n                new Particle(\r\n                    this._canvasParams,\r\n                    this._params,\r\n                    this._tmpParams,\r\n                    this._params.particles.color,\r\n                    this._params.particles.opacity.value,\r\n                    {\r\n                        x: pos ? pos.pos_x : Math.random() * this._canvasParams.width,\r\n                        y: pos ? pos.pos_y : Math.random() * this._canvasParams.height\r\n                    })\r\n            );\r\n\r\n            if (i == nb - 1) {\r\n                if (!this._params.particles.move.enable) {\r\n                    this.particlesDraw();\r\n                }\r\n                this._tmpParams.pushing = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    private _bubbleParticle(particle: Particle) {\r\n        if (this._params.interactivity.events.onhover.enable &&\r\n            isInArray('bubble', this._params.interactivity.events.onhover.mode)) {\r\n\r\n            let dx_mouse: number = particle.x - this._params.interactivity.mouse.pos_x;\r\n            let dy_mouse: number = particle.y - this._params.interactivity.mouse.pos_y;\r\n            let dist_mouse: number = Math.sqrt(dx_mouse * dx_mouse + dy_mouse * dy_mouse);\r\n            let ratio: number = 1 - dist_mouse / this._params.interactivity.modes.bubble.distance;\r\n\r\n            let init: () => void =\r\n                () => {\r\n                    particle.opacity_bubble = particle.opacity;\r\n                    particle.radius_bubble = particle.radius;\r\n                };\r\n\r\n            if (dist_mouse <= this._params.interactivity.modes.bubble.distance) {\r\n                if (ratio >= 0 && this._params.interactivity.status == 'mousemove') {\r\n\r\n                    if (this._params.interactivity.modes.bubble.size != this._params.particles.size.value) {\r\n                        if (this._params.interactivity.modes.bubble.size > this._params.particles.size.value) {\r\n                            let size: number = particle.radius + (this._params.interactivity.modes.bubble.size * ratio);\r\n                            if (size >= 0) {\r\n                                particle.radius_bubble = size;\r\n                            }\r\n                        } else {\r\n                            let dif: number = particle.radius - this._params.interactivity.modes.bubble.size;\r\n                            let size: number = particle.radius - (dif * ratio);\r\n                            if (size > 0) {\r\n                                particle.radius_bubble = size;\r\n                            } else {\r\n                                particle.radius_bubble = 0;\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    if (this._params.interactivity.modes.bubble.opacity != this._params.particles.opacity.value) {\r\n                        if (this._params.interactivity.modes.bubble.opacity > this._params.particles.opacity.value) {\r\n                            let opacity: number = this._params.interactivity.modes.bubble.opacity * ratio;\r\n                            if (opacity > particle.opacity && opacity <= this._params.interactivity.modes.bubble.opacity) {\r\n                                particle.opacity_bubble = opacity;\r\n                            }\r\n                        } else {\r\n                            let opacity: number = particle.opacity - (this._params.particles.opacity.value - this._params.interactivity.modes.bubble.opacity) * ratio;\r\n                            if (opacity < particle.opacity && opacity >= this._params.interactivity.modes.bubble.opacity) {\r\n                                particle.opacity_bubble = opacity;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                init();\r\n            }\r\n\r\n            if (this._params.interactivity.status == 'mouseleave') {\r\n                init();\r\n            }\r\n\r\n        } else if (this._params.interactivity.events.onclick.enable &&\r\n            isInArray('bubble', this._params.interactivity.events.onclick.mode)) {\r\n\r\n            if (this._tmpParams.bubble_clicking) {\r\n                let dx_mouse: number = particle.x - this._params.interactivity.mouse.click_pos_x;\r\n                let dy_mouse: number = particle.y - this._params.interactivity.mouse.click_pos_y;\r\n                let dist_mouse: number = Math.sqrt(dx_mouse * dx_mouse + dy_mouse * dy_mouse);\r\n                let time_spent: number = (new Date().getTime() - this._params.interactivity.mouse.click_time) / 1000;\r\n\r\n                if (time_spent > this._params.interactivity.modes.bubble.duration) {\r\n                    this._tmpParams.bubble_duration_end = true;\r\n                }\r\n\r\n                if (time_spent > this._params.interactivity.modes.bubble.duration * 2) {\r\n                    this._tmpParams.bubble_clicking = false;\r\n                    this._tmpParams.bubble_duration_end = false;\r\n                }\r\n\r\n                let process: any = (bubble_param: any, particles_param: any, p_obj_bubble: any, p_obj: any, id: any) => {\r\n                    if (bubble_param != particles_param) {\r\n                        if (!this._tmpParams.bubble_duration_end) {\r\n                            if (dist_mouse <= this._params.interactivity.modes.bubble.distance) {\r\n                                let obj: any;\r\n                                if (p_obj_bubble != undefined) {\r\n                                    obj = p_obj_bubble;\r\n                                } else {\r\n                                    obj = p_obj;\r\n                                }\r\n                                if (obj != bubble_param) {\r\n                                    let value: any = p_obj - (time_spent * (p_obj - bubble_param) / this._params.interactivity.modes.bubble.duration);\r\n                                    if (id == 'size')\r\n                                        particle.radius_bubble = value;\r\n                                    if (id == 'opacity')\r\n                                        particle.opacity_bubble = value;\r\n                                }\r\n                            } else {\r\n                                if (id == 'size')\r\n                                    particle.radius_bubble = undefined;\r\n                                if (id == 'opacity')\r\n                                    particle.opacity_bubble = undefined;\r\n                            }\r\n                        } else {\r\n                            if (p_obj_bubble != undefined) {\r\n                                let value_tmp: any = p_obj - (time_spent * (p_obj - bubble_param) / this._params.interactivity.modes.bubble.duration);\r\n                                let dif: any = bubble_param - value_tmp;\r\n                                let value: any = bubble_param + dif;\r\n                                if (id == 'size')\r\n                                    particle.radius_bubble = value;\r\n                                if (id == 'opacity')\r\n                                    particle.opacity_bubble = value;\r\n                            }\r\n                        }\r\n                    }\r\n                };\r\n\r\n                if (this._tmpParams.bubble_clicking) {\r\n                    process(this._params.interactivity.modes.bubble.size, this._params.particles.size.value, particle.radius_bubble, particle.radius, 'size');\r\n                    process(this._params.interactivity.modes.bubble.opacity, this._params.particles.opacity.value, particle.opacity_bubble, particle.opacity, 'opacity');\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private _repulseParticle(particle: Particle) {\r\n        if (this._params.interactivity.events.onhover.enable &&\r\n            isInArray('repulse', this._params.interactivity.events.onhover.mode) &&\r\n            this._params.interactivity.status == 'mousemove') {\r\n\r\n            let dx_mouse: number = particle.x - this._params.interactivity.mouse.pos_x;\r\n            let dy_mouse: number = particle.y - this._params.interactivity.mouse.pos_y;\r\n            let dist_mouse: number = Math.sqrt(dx_mouse * dx_mouse + dy_mouse * dy_mouse);\r\n\r\n            let normVec: any = { x: dx_mouse / dist_mouse, y: dy_mouse / dist_mouse };\r\n            let repulseRadius: number = this._params.interactivity.modes.repulse.distance;\r\n            let velocity: number = 100;\r\n            let repulseFactor: number = clamp((1 / repulseRadius) * (-1 * Math.pow(dist_mouse / repulseRadius, 2) + 1) * repulseRadius * velocity, 0, 50);\r\n\r\n            let pos = {\r\n                x: particle.x + normVec.x * repulseFactor,\r\n                y: particle.y + normVec.y * repulseFactor\r\n            }\r\n\r\n            if (this._params.particles.move.out_mode == 'bounce') {\r\n                if (pos.x - particle.radius > 0 && pos.x + particle.radius < this._canvasParams.width)\r\n                    particle.x = pos.x;\r\n                if (pos.y - particle.radius > 0 && pos.y + particle.radius < this._canvasParams.height)\r\n                    particle.y = pos.y;\r\n            } else {\r\n                particle.x = pos.x;\r\n                particle.y = pos.y;\r\n            }\r\n\r\n        } else if (this._params.interactivity.events.onclick.enable &&\r\n            isInArray('repulse', this._params.interactivity.events.onclick.mode)) {\r\n\r\n            if (!this._tmpParams.repulse_finish) {\r\n                this._tmpParams.repulse_count++;\r\n                if (this._tmpParams.repulse_count == this._params.particles.array.length)\r\n                    this._tmpParams.repulse_finish = true;\r\n            }\r\n\r\n            if (this._tmpParams.repulse_clicking) {\r\n\r\n                let repulseRadius: number = Math.pow(this._params.interactivity.modes.repulse.distance / 6, 3);\r\n\r\n                let dx: number = this._params.interactivity.mouse.click_pos_x - particle.x;\r\n                let dy: number = this._params.interactivity.mouse.click_pos_y - particle.y;\r\n                let d: number = dx * dx + dy * dy;\r\n\r\n                let force: number = -repulseRadius / d * 1;\r\n\r\n                let process: () => void =\r\n                    () => {\r\n                        let f: number = Math.atan2(dy, dx);\r\n                        particle.vx = force * Math.cos(f);\r\n                        particle.vy = force * Math.sin(f);\r\n                        if (this._params.particles.move.out_mode == 'bounce') {\r\n                            let pos: {\r\n                                x: number;\r\n                                y: number;\r\n                            } = {\r\n                                    x: particle.x + particle.vx,\r\n                                    y: particle.y + particle.vy\r\n                                }\r\n                            if (pos.x + particle.radius > this._canvasParams.width)\r\n                                particle.vx = -particle.vx;\r\n                            else if (pos.x - particle.radius < 0)\r\n                                particle.vx = -particle.vx;\r\n                            if (pos.y + particle.radius > this._canvasParams.height)\r\n                                particle.vy = -particle.vy;\r\n                            else if (pos.y - particle.radius < 0)\r\n                                particle.vy = -particle.vy;\r\n                        }\r\n                    };\r\n\r\n                if (d <= repulseRadius) {\r\n                    process();\r\n                }\r\n            } else {\r\n                if (this._tmpParams.repulse_clicking == false) {\r\n                    particle.vx = particle.vx_i;\r\n                    particle.vy = particle.vy_i;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private _grabParticle(particle: Particle): void {\r\n        let { interactivity, particles } = this._params;\r\n\r\n        if (interactivity.events.onhover.enable &&\r\n            interactivity.status == 'mousemove') {\r\n\r\n            let dx_mouse: number = particle.x - interactivity.mouse.pos_x;\r\n            let dy_mouse: number = particle.y - interactivity.mouse.pos_y;\r\n            let dist_mouse: number = Math.sqrt(dx_mouse * dx_mouse + dy_mouse * dy_mouse);\r\n\r\n            if (dist_mouse <= interactivity.modes.grab.distance) {\r\n\r\n                let { grab } = interactivity.modes;\r\n\r\n                let opacity_line: number = grab.line_linked.opacity - (dist_mouse / (1 / grab.line_linked.opacity)) / grab.distance;\r\n\r\n                if (opacity_line > 0) {\r\n                    let color_line: {\r\n                        r: number;\r\n                        g: number;\r\n                        b: number;\r\n                    } = particles.line_linked.color_rgb_line;\r\n\r\n                    let { r, g, b } = color_line;\r\n                    this._canvasParams.ctx.strokeStyle = `rgba( ${r}, ${g}, ${b}, ${opacity_line} )`;\r\n                    this._canvasParams.ctx.lineWidth = particles.line_linked.width;\r\n\r\n                    this._canvasParams.ctx.beginPath();\r\n                    this._canvasParams.ctx.moveTo(particle.x, particle.y);\r\n                    this._canvasParams.ctx.lineTo(interactivity.mouse.pos_x, interactivity.mouse.pos_y);\r\n                    this._canvasParams.ctx.stroke();\r\n                    this._canvasParams.ctx.closePath();\r\n                }\r\n            }\r\n        }\r\n    }\r\n}","import { ParticlesManager } from './particlesManager';\r\nimport { ICanvasParams, IParams, ITmpParams } from './interfaces';\r\nimport { hexToRgb } from './utils';\r\n\r\nexport class CanvasManager {\r\n    public particlesManager: ParticlesManager;\r\n\r\n    constructor(private _canvasParams: ICanvasParams, private _params: IParams, private _tmpParams: ITmpParams) {\r\n        this._onWindowResize = this._onWindowResize.bind(this);\r\n\r\n        this._retinaInit();\r\n        this._canvasSize();\r\n\r\n        this.particlesManager = new ParticlesManager(this._canvasParams, this._params, this._tmpParams);\r\n        this.particlesManager.particlesCreate();\r\n\r\n        this._densityAutoParticles();\r\n\r\n        let { particles } = this._params;\r\n        particles.line_linked.color_rgb_line = hexToRgb(particles.line_linked.color);\r\n    }\r\n\r\n    public cancelAnimation(): void {\r\n        if (!this._tmpParams.drawAnimFrame) {\r\n            return;\r\n        }\r\n        cancelAnimationFrame(this._tmpParams.drawAnimFrame);\r\n        this._tmpParams.drawAnimFrame = null;\r\n    }\r\n\r\n    public draw(): void {\r\n        let { particles } = this._params;\r\n\r\n        if (particles.shape.type == 'image') {\r\n            if (this._tmpParams.img_type == 'svg') {\r\n                if (this._tmpParams.count_svg >= particles.number.value) {\r\n                    this.particlesManager.particlesDraw();\r\n                    if (!particles.move.enable) {\r\n                        cancelAnimationFrame(this._tmpParams.drawAnimFrame);\r\n                    } else {\r\n                        this._tmpParams.drawAnimFrame = requestAnimationFrame(this.draw.bind(this));\r\n                    }\r\n                } else {\r\n                    if (!this._tmpParams.img_error) {\r\n                        this._tmpParams.drawAnimFrame = requestAnimationFrame(this.draw.bind(this));\r\n                    }\r\n                }\r\n            } else {\r\n                if (this._tmpParams.img_obj != undefined) {\r\n                    this.particlesManager.particlesDraw();\r\n                    if (!particles.move.enable) {\r\n                        cancelAnimationFrame(this._tmpParams.drawAnimFrame);\r\n                    } else {\r\n                        this._tmpParams.drawAnimFrame = requestAnimationFrame(this.draw.bind(this));\r\n                    }\r\n                } else {\r\n                    if (!this._tmpParams.img_error) {\r\n                        this._tmpParams.drawAnimFrame = requestAnimationFrame(this.draw.bind(this));\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            this.particlesManager.particlesDraw();\r\n\r\n            if (!particles.move.enable) {\r\n                cancelAnimationFrame(this._tmpParams.drawAnimFrame);\r\n            } else {\r\n                this._tmpParams.drawAnimFrame = requestAnimationFrame(this.draw.bind(this));\r\n            }\r\n        }\r\n    }\r\n\r\n    private _densityAutoParticles(): void {\r\n        let { particles } = this._params;\r\n\r\n        if (particles.number.density.enable) {\r\n            let area: number = this._canvasParams.el.width * this._canvasParams.el.height / 1000;\r\n\r\n            if (this._tmpParams.retina) {\r\n                area = area / (this._canvasParams.pxratio * 2);\r\n            }\r\n\r\n            let nb_particles: number = area * particles.number.value / particles.number.density.value_area;\r\n\r\n            let missing_particles: number = particles.array.length - nb_particles;\r\n\r\n            if (missing_particles < 0) {\r\n                this.particlesManager.pushParticles(Math.abs(missing_particles));\r\n            } else {\r\n                this.particlesManager.removeParticles(missing_particles);\r\n            }\r\n        }\r\n    }\r\n\r\n    private _retinaInit(): void {\r\n        if (this._params.retina_detect && window.devicePixelRatio > 1) {\r\n            this._canvasParams.pxratio = window.devicePixelRatio;\r\n            this._tmpParams.retina = true;\r\n\r\n            this._canvasParams.width = this._canvasParams.el.offsetWidth * this._canvasParams.pxratio;\r\n            this._canvasParams.height = this._canvasParams.el.offsetHeight * this._canvasParams.pxratio;\r\n\r\n            this._params.particles.size.value = this._tmpParams.obj.size_value * this._canvasParams.pxratio;\r\n            this._params.particles.size.anim.speed = this._tmpParams.obj.size_anim_speed * this._canvasParams.pxratio;\r\n            this._params.particles.move.speed = this._tmpParams.obj.move_speed * this._canvasParams.pxratio;\r\n            this._params.particles.line_linked.distance = this._tmpParams.obj.line_linked_distance * this._canvasParams.pxratio;\r\n            this._params.interactivity.modes.grab.distance = this._tmpParams.obj.mode_grab_distance * this._canvasParams.pxratio;\r\n            this._params.interactivity.modes.bubble.distance = this._tmpParams.obj.mode_bubble_distance * this._canvasParams.pxratio;\r\n            this._params.particles.line_linked.width = this._tmpParams.obj.line_linked_width * this._canvasParams.pxratio;\r\n            this._params.interactivity.modes.bubble.size = this._tmpParams.obj.mode_bubble_size * this._canvasParams.pxratio;\r\n            this._params.interactivity.modes.repulse.distance = this._tmpParams.obj.mode_repulse_distance * this._canvasParams.pxratio;\r\n\r\n        } else {\r\n            this._canvasParams.pxratio = 1;\r\n            this._tmpParams.retina = false;\r\n        }\r\n    }\r\n\r\n    private _canvasClear(): void {\r\n        this._canvasParams.ctx.clearRect(0, 0, this._canvasParams.width, this._canvasParams.height);\r\n    }\r\n\r\n    private _canvasPaint(): void {\r\n        this._canvasParams.ctx.fillRect(0, 0, this._canvasParams.width, this._canvasParams.height);\r\n    }\r\n\r\n    private _canvasSize(): void {\r\n        this._canvasParams.el.width = this._canvasParams.width;\r\n        this._canvasParams.el.height = this._canvasParams.height;\r\n\r\n        if (this._params && this._params.interactivity.events.resize) {\r\n            window.addEventListener('resize', this._onWindowResize);\r\n        }\r\n    }\r\n\r\n    private _onWindowResize(): void {\r\n        this._canvasParams.width = this._canvasParams.el.offsetWidth;\r\n        this._canvasParams.height = this._canvasParams.el.offsetHeight;\r\n\r\n        if (this._tmpParams.retina) {\r\n            this._canvasParams.width *= this._canvasParams.pxratio;\r\n            this._canvasParams.height *= this._canvasParams.pxratio;\r\n        }\r\n\r\n        this._canvasParams.el.width = this._canvasParams.width;\r\n        this._canvasParams.el.height = this._canvasParams.height;\r\n\r\n        if (!this._params.particles.move.enable) {\r\n            this.particlesManager.particlesEmpty();\r\n            this.particlesManager.particlesCreate();\r\n            this.particlesManager.particlesDraw();\r\n            this._densityAutoParticles();\r\n        }\r\n\r\n        this._densityAutoParticles();\r\n    }\r\n}\r\n","import { Directive, ElementRef, AfterViewInit, HostListener, Input, OnDestroy } from \"@angular/core\";\r\nimport { CanvasManager, ICanvasParams, IParams, ITmpParams, getDefaultParams, isInArray, deepExtend, loadImg } from './models';\r\n\r\n@Directive({\r\n    selector: '[d-particles]'\r\n})\r\nexport class ParticlesDirective implements AfterViewInit, OnDestroy  {\r\n    @Input() set params(value: IParams) {\r\n        let defaultParams: IParams = getDefaultParams();\r\n        this._params = deepExtend(defaultParams, value);\r\n    }\r\n\r\n    constructor(private el: ElementRef) { }\r\n\r\n    private _canvasParams: ICanvasParams;\r\n    private _params: IParams;\r\n    private _tmpParams: ITmpParams = {};\r\n    private _canvasManager: CanvasManager;\r\n\r\n    ngOnDestroy(): void {\r\n        if (!this._canvasManager) {\r\n            return;\r\n        }\r\n        this._canvasManager.cancelAnimation();\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        this._canvasParams = {\r\n            el: this.el.nativeElement,\r\n            ctx: this.el.nativeElement.getContext('2d'),\r\n            width: this.el.nativeElement.offsetWidth,\r\n            height: this.el.nativeElement.offsetHeight\r\n        };\r\n\r\n        this._tmpParams.obj = {\r\n            size_value: this._params.particles.size.value,\r\n            size_anim_speed: this._params.particles.size.anim.speed,\r\n            move_speed: this._params.particles.move.speed,\r\n            line_linked_distance: this._params.particles.line_linked.distance,\r\n            line_linked_width: this._params.particles.line_linked.width,\r\n            mode_grab_distance: this._params.interactivity.modes.grab.distance,\r\n            mode_bubble_distance: this._params.interactivity.modes.bubble.distance,\r\n            mode_bubble_size: this._params.interactivity.modes.bubble.size,\r\n            mode_repulse_distance: this._params.interactivity.modes.repulse.distance\r\n        };\r\n\r\n        this._params.interactivity.el = (this._params.interactivity.detect_on == 'window') ? window : this._canvasParams.el;\r\n\r\n        if (isInArray('image', this._params.particles.shape.type)) {\r\n            this._tmpParams.img_type = this._params.particles.shape.image.src.substr(this._params.particles.shape.image.src.length - 3);\r\n            loadImg(this._params, this._tmpParams);\r\n        }\r\n\r\n        this._canvasManager = new CanvasManager(this._canvasParams, this._params, this._tmpParams);\r\n        this._canvasManager.draw();\r\n    }\r\n\r\n    /**\r\n     * Mouse move event\r\n     * @param event\r\n     */\r\n    @HostListener('mousemove', ['$event']) onMouseMove(event) {\r\n        let { interactivity } = this._params;\r\n\r\n        if (interactivity.events.onhover.enable ||\r\n            interactivity.events.onclick.enable) {\r\n\r\n            let pos: {\r\n                x: number;\r\n                y: number;\r\n            };\r\n\r\n            if (interactivity.el == window) {\r\n                pos = {\r\n                    x: event.clientX,\r\n                    y: event.clientY\r\n                };\r\n            } else {\r\n                pos = {\r\n                    x: event.offsetX || event.clientX,\r\n                    y: event.offsetY || event.clientY\r\n                };\r\n            }\r\n\r\n            interactivity.mouse.pos_x = pos.x;\r\n            interactivity.mouse.pos_y = pos.y;\r\n\r\n            if (this._tmpParams.retina) {\r\n                interactivity.mouse.pos_x *= this._canvasParams.pxratio;\r\n                interactivity.mouse.pos_y *= this._canvasParams.pxratio;\r\n            }\r\n\r\n            interactivity.status = 'mousemove';\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Mouse leave event\r\n     */\r\n    @HostListener('mouseleave') onMouseLeave() {\r\n        let { interactivity } = this._params;\r\n\r\n        if (interactivity.events.onhover.enable ||\r\n            interactivity.events.onclick.enable) {\r\n\r\n            interactivity.mouse.pos_x = null;\r\n            interactivity.mouse.pos_y = null;\r\n            interactivity.status = 'mouseleave';\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Click event\r\n     */\r\n    @HostListener('click') onClick() {\r\n        let { interactivity, particles } = this._params;\r\n\r\n        if (interactivity.events.onclick.enable) {\r\n            interactivity.mouse.click_pos_x = interactivity.mouse.pos_x;\r\n            interactivity.mouse.click_pos_y = interactivity.mouse.pos_y;\r\n            interactivity.mouse.click_time = new Date().getTime();\r\n\r\n            switch (interactivity.events.onclick.mode) {\r\n                case 'push':\r\n                    if (particles.move.enable) {\r\n                        this._canvasManager.particlesManager.pushParticles(interactivity.modes.push.particles_nb, interactivity.mouse);\r\n                    } else {\r\n                        if (interactivity.modes.push.particles_nb == 1) {\r\n                            this._canvasManager.particlesManager.pushParticles(interactivity.modes.push.particles_nb, interactivity.mouse);\r\n                        } else if (interactivity.modes.push.particles_nb > 1) {\r\n                            this._canvasManager.particlesManager.pushParticles(interactivity.modes.push.particles_nb);\r\n                        }\r\n                    }\r\n                    break;\r\n\r\n                case 'remove':\r\n                    this._canvasManager.particlesManager.removeParticles(interactivity.modes.remove.particles_nb);\r\n                    break;\r\n\r\n                case 'bubble':\r\n                    this._tmpParams.bubble_clicking = true;\r\n                    break;\r\n\r\n                case 'repulse':\r\n                    this._tmpParams.repulse_clicking = true;\r\n                    this._tmpParams.repulse_count = 0;\r\n                    this._tmpParams.repulse_finish = false;\r\n                    setTimeout(() => {\r\n                        this._tmpParams.repulse_clicking = false;\r\n                    }, interactivity.modes.repulse.duration * 1000);\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { ParticlesComponent } from './particles.component';\r\nimport { ParticlesDirective } from './particles.directive';\r\n\r\nexport * from './particles.component';\r\nexport * from './particles.directive';\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule\r\n    ],\r\n    declarations: [\r\n        ParticlesComponent,\r\n        ParticlesDirective\r\n    ],\r\n    exports: [\r\n        ParticlesComponent,\r\n        ParticlesDirective\r\n    ]\r\n})\r\nexport class ParticlesModule { }","/*\n * Public API Surface of ngx-export-as\n */\nexport * from './lib'","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":"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"}